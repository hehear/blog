const express = require('express');
const logger = require('../../common/log4js');
const router = express.Router();
// const schoolService=require('../service/schoolService');

const resMsg=require('../model/resMsg');



router.use(function (req, res, next) {

    next();
});

router.get('/', function (req, res) {
    logger.debug('访问article首页');
    res.render('article/index');

});

router.get('/mdIframe', function (req, res) {
    logger.debug('访问article,md编辑页面');
    res.render('article/mdiframe');

});

router.post('/list',function(req,res){

    logger.debug('articel 列表页');

    var pageIndex=req.body.pageIndex;
    var page={
        pgsize:10,
        pgindex:pageIndex||1
    }
    //TODO TL
    var filter={};
    schoolService.query4Page(filter,page,function(rows,page){
        if(rows==='error'){
            res.json(resMsg.getError('加载school出错啦'));
        }else{
            res.json(resMsg.getSuccess(rows,page));
        }
    })

});


//必须
module.exports = router;